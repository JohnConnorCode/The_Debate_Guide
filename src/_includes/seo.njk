{# SEO Meta Tags - Open Graph, Twitter Cards, JSON-LD #}

{# Basic SEO #}
<meta name="description" content="{{ description or site.description }}">
<meta name="author" content="{{ site.author }}">
<meta name="robots" content="index, follow">
<link rel="canonical" href="{{ site.url }}{{ page.url }}">

{# Keywords for chapters #}
{% if keywords %}
<meta name="keywords" content="{{ keywords | join(', ') }}">
{% endif %}

{# Open Graph (Facebook, LinkedIn) #}
<meta property="og:title" content="{{ title }}{% if title != site.title %} — {{ site.title }}{% endif %}">
<meta property="og:description" content="{{ description or site.description }}">
<meta property="og:image" content="{{ site.url }}{{ ogImage or site.ogImage }}">
<meta property="og:image:width" content="1200">
<meta property="og:image:height" content="630">
<meta property="og:image:alt" content="{{ ogImageAlt or title }}">
<meta property="og:url" content="{{ site.url }}{{ page.url }}">
<meta property="og:type" content="{% if pageType == 'chapter' or pageType == 'introduction' %}article{% else %}website{% endif %}">
<meta property="og:site_name" content="{{ site.title }}">
<meta property="og:locale" content="en_US">

{# Article-specific Open Graph #}
{% if pageType == 'chapter' or pageType == 'introduction' %}
<meta property="article:author" content="{{ site.author }}">
<meta property="article:section" content="{{ partTitle or 'Education' }}">
<meta property="article:tag" content="rhetoric">
<meta property="article:tag" content="debate">
<meta property="article:tag" content="persuasion">
{% if chapterNumber %}
<meta property="article:tag" content="chapter {{ chapterNumber }}">
{% endif %}
{% endif %}

{# Twitter Cards #}
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ title }}{% if title != site.title %} — {{ site.title }}{% endif %}">
<meta name="twitter:description" content="{{ description or site.description }}">
<meta name="twitter:image" content="{{ site.url }}{{ ogImage or site.ogImage }}">
<meta name="twitter:image:alt" content="{{ ogImageAlt or title }}">
{% if site.twitterHandle %}
<meta name="twitter:site" content="{{ site.twitterHandle }}">
<meta name="twitter:creator" content="{{ site.twitterHandle }}">
{% endif %}

{# JSON-LD Structured Data #}

{# WebSite Schema with SearchAction (for sitelinks search box) #}
{% if pageType == 'home' %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "{{ site.title }}",
    "url": "{{ site.url }}",
    "description": "{{ site.description }}",
    "publisher": {
        "@type": "Organization",
        "name": "{{ site.author }}",
        "url": "https://superdebate.org",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ site.url }}/assets/logo.png"
        }
    },
    "potentialAction": {
        "@type": "SearchAction",
        "target": {
            "@type": "EntryPoint",
            "urlTemplate": "{{ site.url }}/?q={search_term_string}"
        },
        "query-input": "required name=search_term_string"
    }
}
</script>

{# Book Schema for home page #}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Book",
    "@id": "{{ site.url }}/#book",
    "name": "{{ site.title }}",
    "description": "{{ site.description }}",
    "url": "{{ site.url }}",
    "author": {
        "@type": "Organization",
        "name": "{{ site.author }}",
        "url": "https://superdebate.org"
    },
    "publisher": {
        "@type": "Organization",
        "name": "{{ site.author }}"
    },
    "inLanguage": "en",
    "genre": ["Education", "Philosophy", "Rhetoric", "Self-Help"],
    "about": [
        {"@type": "Thing", "name": "Rhetoric"},
        {"@type": "Thing", "name": "Debate"},
        {"@type": "Thing", "name": "Persuasion"},
        {"@type": "Thing", "name": "Classical Philosophy"},
        {"@type": "Thing", "name": "Public Speaking"},
        {"@type": "Thing", "name": "Critical Thinking"}
    ],
    "keywords": "rhetoric, debate, persuasion, ethos, pathos, logos, Aristotle, Socrates, public speaking, argumentation",
    "educationalLevel": "beginner to intermediate",
    "learningResourceType": "textbook",
    "numberOfPages": 20,
    "bookFormat": "https://schema.org/EBook"
}
</script>
{% endif %}

{# Chapter/Article Schema #}
{% if pageType == 'chapter' or pageType == 'introduction' %}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "@id": "{{ site.url }}{{ page.url }}#article",
    "headline": "{{ chapterTitle or title }}",
    "description": "{{ description or subtitle or site.description }}",
    "image": {
        "@type": "ImageObject",
        "url": "{{ site.url }}{{ ogImage or site.ogImage }}",
        "width": 1200,
        "height": 630
    },
    "author": {
        "@type": "Organization",
        "name": "{{ site.author }}",
        "url": "https://superdebate.org"
    },
    "publisher": {
        "@type": "Organization",
        "name": "{{ site.author }}",
        "logo": {
            "@type": "ImageObject",
            "url": "{{ site.url }}/assets/logo.png",
            "width": 200,
            "height": 200
        }
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "{{ site.url }}{{ page.url }}"
    },
    "isPartOf": {
        "@type": "Book",
        "@id": "{{ site.url }}/#book",
        "name": "{{ site.title }}"
    },
    "inLanguage": "en",
    "keywords": "{{ partTitle or 'rhetoric' }}, debate, persuasion, {{ chapterTitle or title | lower }}",
    "articleSection": "{{ partTitle or 'Foundations' }}",
    "learningResourceType": "chapter",
    "datePublished": "{{ datePublished or site.publishDate or '2025-01-01' }}",
    "dateModified": "{{ dateModified or site.lastModified or '2025-01-22' }}"
    {% if chapterNumber %},
    "position": {{ chapterNumber }}
    {% endif %}
}
</script>

{# Course Schema for educational content #}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Course",
    "name": "{{ chapterTitle or title }}",
    "description": "{{ description or subtitle or site.description }}",
    "provider": {
        "@type": "Organization",
        "name": "{{ site.author }}",
        "url": "https://superdebate.org"
    },
    "educationalLevel": "beginner to intermediate",
    "teaches": "{{ chapterTitle or title }}",
    "inLanguage": "en",
    "isPartOf": {
        "@type": "Course",
        "name": "{{ site.title }}",
        "description": "{{ site.description }}"
    }
}
</script>
{% endif %}

{# Organization Schema #}
<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "{{ site.author }}",
    "url": "https://superdebate.org",
    "logo": "{{ site.url }}/assets/logo.png",
    "sameAs": [
        "https://twitter.com/superdebate"
    ]
}
</script>
