{# Header component - configurable nav based on page type #}
<header class="header" role="banner">
    <div class="header-inner">
        <a href="{{ '/' | url }}" class="logo"{% if pageType == "home" %} aria-current="page"{% endif %} aria-label="The Debate Guide - Home">
            <div class="logo-mark" aria-hidden="true"><span>D</span></div>
            <span class="logo-text">THE DEBATE GUIDE</span>
        </a>

        {# Reading position indicator - shown on chapter pages #}
        {% if pageType == "chapter" and chapterNumber %}
        <div class="reading-position" aria-live="polite" aria-label="Reading progress">
            <span class="reading-position-text">Chapter <span class="reading-position-current">{{ chapterNumber }}</span> of 20</span>
        </div>
        {% endif %}

        {# Desktop navigation #}
        <nav class="nav nav-desktop" aria-label="Main navigation">
            {% if pageType == "home" %}
                <a href="{{ '/introduction/' | url }}">Introduction</a>
                <a href="#contents" aria-current="true">Contents</a>
            {% elif pageType == "introduction" %}
                <a href="{{ '/' | url }}">Contents</a>
                <a href="#part-1">Begin Reading</a>
            {% else %}
                <a href="{{ '/' | url }}">Contents</a>
                <a href="{{ '/introduction/' | url }}">Introduction</a>
                <a href="{{ '/about/' | url }}">About</a>
            {% endif %}
            <button class="search-trigger" id="search-trigger" aria-label="Search (Press / or Ctrl+K)" title="Search">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
                <kbd class="search-shortcut-hint">/</kbd>
            </button>
            <a href="https://superdebate.org" target="_blank" rel="noopener noreferrer" class="nav-cta">Join SuperDebate</a>
        </nav>

        {# Mobile hamburger button #}
        <button class="mobile-menu-btn" aria-label="Open navigation menu" aria-expanded="false" aria-controls="mobile-nav">
            <span class="hamburger-line" aria-hidden="true"></span>
            <span class="hamburger-line" aria-hidden="true"></span>
            <span class="hamburger-line" aria-hidden="true"></span>
        </button>
    </div>
    <div class="header-line"></div>
</header>

{# Mobile navigation drawer #}
<div class="mobile-nav-overlay" aria-hidden="true"></div>
<nav class="mobile-nav" id="mobile-nav" aria-label="Mobile navigation" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="mobile-nav-header">
        <span class="mobile-nav-title" id="mobile-nav-title">Navigate</span>
        <button class="mobile-nav-close" aria-label="Close navigation menu">
            <span aria-hidden="true"></span>
            <span aria-hidden="true"></span>
        </button>
    </div>
    <button class="mobile-nav-search" id="mobile-search-trigger" aria-label="Search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
        </svg>
        <span>Search chapters...</span>
    </button>
    <div class="mobile-nav-links">
        <a href="{{ '/' | url }}" class="mobile-nav-link">Contents</a>
        <a href="{{ '/introduction/' | url }}" class="mobile-nav-link">Introduction</a>

        {% for part in chapters.parts %}
        <div class="mobile-nav-section">
            <button class="mobile-nav-section-toggle" aria-expanded="false">
                <span class="mobile-nav-section-number">{{ part.number }}</span>
                <span class="mobile-nav-section-title">{{ part.title }}</span>
                <svg class="mobile-nav-chevron" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                    <path d="M4 6l4 4 4-4" stroke="currentColor" stroke-width="2" fill="none"/>
                </svg>
            </button>
            <div class="mobile-nav-chapters" aria-hidden="true">
                {% for chapter in part.chapters %}
                <a href="{{ '/chapters/' + part.id + '/chapter-' + (chapter.number | padZero) + '-' + chapter.slug + '/' | url }}" class="mobile-nav-chapter">
                    <span class="mobile-nav-chapter-num">{{ chapter.number | padZero }}</span>
                    <span class="mobile-nav-chapter-title">{{ chapter.title }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
        {% endfor %}

        <a href="{{ '/about/' | url }}" class="mobile-nav-link">About</a>
    </div>
    <div class="mobile-nav-cta">
        <a href="https://superdebate.org" target="_blank" rel="noopener noreferrer" class="btn-primary">Join SuperDebate</a>
    </div>
</nav>
